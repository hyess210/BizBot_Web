{"ast":null,"code":"'use strict';\n\n(function () {\n  (function () {\n    function e(a) {\n      for (var b = [a]; a = a.parentNode || a.host || a.defaultView;) b.push(a);\n\n      return b;\n    }\n\n    function f(a) {\n      return function (b) {\n        var c = \"undefined\" !== typeof b.getAttribute ? b.getAttribute(\"class\") || \"\" : void 0;\n        \"undefined\" !== typeof c && -1 === c.indexOf(a) && b.setAttribute(\"class\", c.concat(\" \", a).trim());\n      };\n    }\n\n    function g(a) {\n      return function (b) {\n        var c = \"undefined\" !== typeof b.getAttribute ? b.getAttribute(\"class\") || \"\" : void 0;\n\n        if (c) {\n          var d = c.indexOf(a);\n          0 <= d && (0 === d || 0 <= h.indexOf(c.charAt(d - 1))) && (c = c.replace(a, \"\").trim(), \"\" === c ? b.removeAttribute(\"class\") : b.setAttribute(\"class\", c));\n        }\n      };\n    }\n\n    function k() {\n      var a = function (a) {\n        function c() {\n          b = !1;\n          \"blur\" === a.type && Array.prototype.slice.call(e(a.target)).forEach(g(\"focus-within\"));\n          \"focus\" === a.type && Array.prototype.slice.call(e(a.target)).forEach(f(\"focus-within\"));\n        }\n\n        if (!b) {\n          window.requestAnimationFrame(c);\n          var b = !0;\n        }\n      };\n\n      document.addEventListener(\"focus\", a, !0);\n      document.addEventListener(\"blur\", a, !0);\n      f(\"js-focus-within\")(document.body);\n      return !0;\n    }\n\n    var h = [\"\\n\", \"\\t\", \" \", \"\\r\"];\n\n    try {\n      return \"undefined\" !== typeof window && !document.querySelector(\":focus-within\");\n    } catch (a) {\n      return k();\n    }\n  })();\n})();","map":{"version":3,"sources":["../src/focus-within.js"],"names":["polyfill","CLASS_NAME","WHITE_SPACE","computeEventPath","path","parent","node","addClass","el","attributes","undefined","removeClass","index","newAttributes","load","handler","e","action","running","Array","window","document"],"mappings":";;;AAIAA,GAAAA,YAAoB;AAUlBG,aAASA,CAATA,CAAyB,CAAzBA,EAAgC;AAI9B,WAHA,IAAIC,CAAAA,GAAO,CAAA,CAAA,CAGX,EAAQC,CAAR,GAAiBC,CAAAA,CAAjB,UAAiBA,IAAmBA,CAAAA,CAApC,IAAiBA,IAAgCA,CAAAA,CAAjD,WAAA,GACEF,CAAAA,CAAAA,IAAAA,CAAAA,CAAAA;;AAIF,aAT8B,CAS9B;AAWFG;;AAAAA,aAASA,CAATA,CAAiB,CAAjBA,EAAyB;AACvB,aAAO,UAASC,CAAT,EAAa;AAClB,YAAIC,CAAAA,GACF,gBAAA,OAAOD,CAAAA,CAAP,YAAA,GACEA,CAAAA,CAAAA,YAAAA,CADF,OACEA,KADF,EAAA,GAEEE,KAAAA,CAHJ;AAKA,wBACE,OADF,CAAA,IAEgC,CAFhC,CAEgC,KAA9BD,CAAAA,CAAAA,OAAAA,CAFF,CAEEA,CAFF,IAIED,CAAAA,CAAAA,YAAAA,CAAAA,OAAAA,EAAyBC,CAAAA,CAAAA,MAAAA,CAAAA,GAAAA,EAAAA,CAAAA,EAVT,IAUSA,EAAzBD,CAJF;AAPqB,OACvB;AAsBFG;;AAAAA,aAASA,CAATA,CAAoB,CAApBA,EAA4B;AAC1B,aAAO,UAASH,CAAT,EAAa;AAClB,YAAIC,CAAAA,GACF,gBAAA,OAAOD,CAAAA,CAAP,YAAA,GACEA,CAAAA,CAAAA,YAAAA,CADF,OACEA,KADF,EAAA,GAEEE,KAAAA,CAHJ;;AAKA,YAAA,CAAA,EAAgB;AACd,cAAIE,CAAAA,GAAQH,CAAAA,CAAAA,OAAAA,CAAAA,CAAAA,CAAZ;AAIA,eAAA,CAAA,KAAA,MAAA,CAAA,IAAA,KAGIP,CAAAA,CAAAA,OAAAA,CAAoBO,CAAAA,CAAAA,MAAAA,CAAkBG,CAAlBH,GAHxB,CAGwBA,CAApBP,CAHJ,MAKMW,CACJ,GADoBJ,CAAAA,CAAAA,OAAAA,CAAAA,CAAAA,EAAAA,EAAAA,EAAAA,IAAAA,EAAhBI,EACJ,OAAA,CAAA,GACEL,CAAAA,CAAAA,eAAAA,CADF,OACEA,CADF,GAEEA,CAAAA,CAAAA,YAAAA,CAAAA,OAAAA,EAbU,CAaVA,CARJ;AAXgB;AADM,OAC1B;AA6BFM;;AAAAA,aAASA,CAATA,GAAgB;AACd,UAAIC,CAAAA,GAAUA,UAASC,CAATD,EAAY;AAQxBE,iBAASA,CAATA,GAAkB;AAChBC,UAAAA,CAAAA,GAAU,CAAA,CAAVA;AAEA,qBAAeF,CAAAA,CAAf,IAAA,IACEG,KAAAA,CAAAA,SAAAA,CAAAA,KAAAA,CAAAA,IAAAA,CACUhB,CAAAA,CAAiBa,CAAAA,CAD3BG,MACUhB,CADVgB,EAAAA,OAAAA,CAEaR,CAAAA,CAjGUV,cAiGVU,CAFbQ,CADF;AAMA,sBAAgBH,CAAAA,CAAhB,IAAA,IACEG,KAAAA,CAAAA,SAAAA,CAAAA,KAAAA,CAAAA,IAAAA,CACUhB,CAAAA,CAAiBa,CAAAA,CAD3BG,MACUhB,CADVgB,EAAAA,OAAAA,CAEaZ,CAAAA,CAvGUN,cAuGVM,CAFbY,CADF;AAOF;;AAAA,YAAI,CAAJ,CAAA,EAAc;AACZC,UAAAA,MAAAA,CAAAA,qBAAAA,CAAAA,CAAAA;AACA,cAAA,CAAA,GAAU,CAFE,CAEZ;AA1BsB;AA8B1BC,OA9BA;;AA8BAA,MAAAA,QAAAA,CAAAA,gBAAAA,CAAAA,OAAAA,EAAAA,CAAAA,EAA4C,CAA5CA,CAAAA;AACAA,MAAAA,QAAAA,CAAAA,gBAAAA,CAAAA,MAAAA,EAAAA,CAAAA,EAA2C,CAA3CA,CAAAA;AACAd,MAAAA,CAAAA,CAAAA,iBAAAA,CAAAA,CAA4Bc,QAAAA,CAA5Bd,IAAAA;AACA,aAAO,CAlCO,CAkCd;AAnHY;;AAAA,QAAIL,CAAAA,GAAc,CAAA,IAAA,EAAA,IAAA,EAAA,GAAA,EAAA,IAAA,CAAlB;;AAsHd,QAAI;AACF,aAAA,gBAAO,OAAP,MAAA,IACE,CAACmB,QAAAA,CAAAA,aAAAA,CAFD,eAECA,CADH;AAEA,KAHF,CAGE,OAAA,CAAA,EAAc;AACd,aAAOP,CADO,EACd;AA5HgB;AAApBd,GAAAA;AAgIA,C","sourcesContent":["/**\n * :focus-within Polyfill\n * @return {boolean}\n */\nfunction polyfill() {\n  /** @const */ var CLASS_NAME = 'focus-within';\n  /** @const */ var WHITE_SPACE = ['\\n', '\\t', ' ', '\\r'];\n\n  /**\n   * Calculate the entire event path.\n   *\n   * @param {Element} node\n   * @return {Array} computedPath\n   */\n  function computeEventPath(node) {\n    var path = [node];\n    var parent = null;\n\n    while ((parent = node.parentNode || node.host || node.defaultView)) {\n      path.push(parent);\n      node = parent;\n    }\n\n    return path;\n  }\n\n  /**\n   * Add user defined attribute to element retaining any previously\n   * applied attributes. Attribute can be the 'class' attribute for\n   * compatibility reasons.\n   *\n   * @param {string} value\n   * @return {function(Element)} callback\n   */\n  function addClass(value) {\n    return function(el) {\n      var attributes =\n        typeof el.getAttribute !== 'undefined' ?\n          el.getAttribute('class') || '' :\n          undefined;\n\n      if (\n        typeof attributes !== 'undefined' &&\n        attributes.indexOf(value) === -1\n      ) {\n        el.setAttribute('class', attributes.concat(' ', value).trim());\n      }\n    };\n  }\n\n  /**\n   * Remove user defined attribute value or entire attribute if last one.\n   * Attribute can be the 'class' attribute for compatibility reasons.\n   *\n   * @param {string} value\n   * @return {function(Element)} callback\n   */\n  function removeClass(value) {\n    return function(el) {\n      var attributes =\n        typeof el.getAttribute !== 'undefined' ?\n          el.getAttribute('class') || '' :\n          undefined;\n\n      if (attributes) {\n        var index = attributes.indexOf(value);\n        // Check if `value` exists in `attributes` and it is either\n        // at the start or after a whitespace character. This stops\n        // \"focus-within\" being remove from \"js-focus-within\".\n        if (\n          index >= 0 &&\n          (index === 0 ||\n            WHITE_SPACE.indexOf(attributes.charAt(index - 1)) >= 0)\n        ) {\n          var newAttributes = attributes.replace(value, '').trim();\n          newAttributes === '' ?\n            el.removeAttribute('class') :\n            el.setAttribute('class', newAttributes);\n        }\n      }\n    };\n  }\n\n  /**\n   * Attach event listerns to initiate polyfill\n   * @return {boolean}\n   */\n  function load() {\n    var handler = function(e) {\n      var running;\n\n      /**\n       * Request animation frame callback.\n       * Remove previously applied attributes.\n       * Add new attributes.\n       */\n      function action() {\n        running = false;\n\n        if ('blur' === e.type) {\n          Array.prototype.slice\n              .call(computeEventPath(e.target))\n              .forEach(removeClass(CLASS_NAME));\n        }\n\n        if ('focus' === e.type) {\n          Array.prototype.slice\n              .call(computeEventPath(e.target))\n              .forEach(addClass(CLASS_NAME));\n        }\n      }\n\n      if (!running) {\n        window.requestAnimationFrame(action);\n        running = true;\n      }\n    };\n\n    document.addEventListener('focus', handler, true);\n    document.addEventListener('blur', handler, true);\n    addClass('js-focus-within')(document.body);\n    return true;\n  }\n\n  try {\n    return typeof window !== 'undefined' &&\n      !document.querySelector(':' + CLASS_NAME);\n  } catch (error) {\n    return load();\n  }\n}\n\npolyfill();\n"]},"metadata":{},"sourceType":"script"}